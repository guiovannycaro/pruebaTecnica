<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Insert title here</title>



<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

</head>
<body onload="listar()">
	<h1>Hola Mundo Spring</h1>

	<table width="200" border="1" id="table_id">
		<thead>
			<tr>
				<td colspan="7">
					<button class="btn btn-primary add" data-toggle="modal" name="add"
						data-target="#RegistrarClienteModal	" id="Agregar">AGREGAR</button>
				</td>
			</tr>
			<tr>
				<td>Nombre</td>
				<td>Apellido</td>
				<td>email</td>
				<td>ciudad</td>
				<td>pais</td>
				<td>telefono</td>
				<td>Accion</td>
			</tr>
		</thead>
		<tbody id="tbody">


		</tbody>


	</table>

	</br>
</body>

</html>

<div id="RegistrarClienteModal" class="modal fade" role="dialog">
 <div class="modal-dialog">

 <!-- Modal content-->
 <div class="modal-content">
 <div class="modal-header">
 <button type="button" class="close" data-dismiss="modal">×</button>
 <h4 class="modal-title">Agregar Usuario</h4>
 </div>
 <div class="modal-body">

		 <div class="form-group">
			   <label class="control-label" for="inputPatient">Nombre</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Nombre" name="Nombre" placeholder="Nombre" type="text" value="" required>
                 
                 	 <input class="form-control" id="Nombre" name="id" id="id" type="hidden">
			  </div>
     	 </div>

   
 <div class="form-group">
			   <label class="control-label" for="inputPatient">Nombre</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Nombre" name="Nombre" placeholder="Nombre" type="text" value="" required>
                 
                 	 <input class="form-control" id="Nombre" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Apellido</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Apellido" name="Apellido" placeholder="Apellido" type="text" value="" required>
                 
                 	 <input class="form-control" id="Apellido" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Email</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Email" name="Email" placeholder="Nombre" type="text" value="" required>
                 
                 	 <input class="form-control" id="Email" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Ciudad</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Ciudad" name="Ciudad" placeholder="Ciudad" type="text" value="" required>
                 
                 	 <input class="form-control" id="Ciudad" name="id" id="id" type="hidden">
			  </div>
     	 </div>
 
		<div class="form-group">
			   <label class="control-label" for="inputPatient">Pais</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Pais" name="Pais" placeholder="Pais" type="text" value="" required>
                 
                 	 <input class="form-control" id="Pais" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	 <div class="form-group">
			   <label class="control-label" for="inputPatient">Telefono</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Telefono" name="Telefono" placeholder="Telefono" type="text" value="" required>
                 
                 	 <input class="form-control" id="Telefono" name="id" id="id" type="hidden">
			  </div>
     	 </div>
		 
 </div>
 <div class="modal-footer">
 <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancelar</button>
 <button type="submit" class="btn btn-primary Registrar"  data-dismiss="modal" id="Registrar">Registrar</button>
  
 </div>
 </div>
 </div>
 </div>


<div id="EditarClienteModal" class="modal fade" role="dialog">
 <div class="modal-dialog">

 <!-- Modal content-->
 <div class="modal-content">
 <div class="modal-header">
 <button type="button" class="close" data-dismiss="modal">×</button>
 <h4 class="modal-title">Editar Persona</h4>
 </div>
 <div class="modal-body">

		<div class="form-group">
			   <label class="control-label" for="inputPatient">Nombre</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Nombreu" name="Nombreu" placeholder="Nombre" type="text" value="" required>
                 
                 	 <input class="form-control" id="Nombre" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Apellido</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Apellidou" name="Apellidou" placeholder="Apellidou" type="text" value="" required>
                 
                 	 <input class="form-control" id="Apellido" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Email</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Emailu" name="Emailu" placeholder="Email" type="text" value="" required>
                 
                 	 <input class="form-control" id="Emailu" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	  <div class="form-group">
			   <label class="control-label" for="inputPatient">Ciudad</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Ciudadu" name="Ciudadu" placeholder="Ciudad" type="text" value="" required>
                 
                 	 <input class="form-control" id="Ciudadu" name="id" id="id" type="hidden">
			  </div>
     	 </div>
 
		<div class="form-group">
			   <label class="control-label" for="inputPatient">Pais</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Paisu" name="Paisu" placeholder="Pais" type="text" value="" required>
                 
                 	 <input class="form-control" id="Paisu" name="id" id="id" type="hidden">
			  </div>
     	 </div>
     	 
     	 <div class="form-group">
			   <label class="control-label" for="inputPatient">Telefono</label>
			   <div class="field desc">
			  	 <input class="form-control" id="Telefonou" name="Telefonou" placeholder="Telefonou" type="text" value="" required>
                 
                 	 <input class="form-control" id="Telefonou" name="id" id="id" type="hidden">
			  </div>
     	 </div>

   

		 <div class="form-group">
			 
			   <div class="field desc">
			  <input class="form-control" id="id" name="id"  type="hidden">
			  </div>
     	 </div>
 
		
		 
 </div>
 <div class="modal-footer">
 <button class="btn btn-danger" data-dismiss="modal" aria-hidden="true">Cancelar</button>
 <button type="submit" class="btn btn-primary Registrar"  data-dismiss="modal" id="Editar">Editar</button>
  
 </div>
 </div>
 </div>
 </div>






<script>

$(document).ready(function(){
	$("#tbody").DataTable();
});

function listar(){
	console.log("hola");
	$.ajax({
	
		type: 'GET',
		url: 'localhost:8082/pruebaTecnica/Listar',
		crossDomain: true,
		dataType: 'json',
		headers: {
            "accept": "application/json",
            "Access-Control-Allow-Origin":"*"
        }
		
	}).done(function(resp){
		let cadena = "<br>";
		for(datos of resp){
			cadena = '<tr>'+
			              '<td>'+datos.id+'</td>'+
			              '<td>'+datos.nombre+'</td>'+
			              '<td>'+datos.apellido+'</td>'+
			              '<td>'+datos.email+'</td>'+
			              '<td>'+datos.ciudad+'</td>'+
			              '<td>'+datos.pais+'</td>'+
			              '<td>'+datos.telefono+'</td>'+
			              '<td>'+
							'<button data-toggle="modal" data-target="#EditarClienteModal"'+
							'name="edit" class="btn btn-primary btn-xs edit">Editar</button> -'+
							'<button data-toggle="modal" data-target="#EliminarClienteModal"'+
							'id="" name="drop" class="btn btn-primary btn-xs drop">Eliminar</button>'+
						'</td>'+
			         '</tr>';
			
			
			console.log(datos.nombre);
		}
		document.getElementById('tbody').innerHTML=cadena;
	})
}
	
	function getMetodoDataTable(){
		
		$.ajax({
			type: 'GET',
			url: 'localhost:8082/pruebaTecnica/Listar',
			crossDomain: true,
			dataType: 'json',
			headers: {
	            "accept": "application/json",
	            "Access-Control-Allow-Origin":"*"
	        },
	        success:function(resp){
			$('#table_id').DataTable({
				dom:'Bfrtip',
				destroy:'true',
				data:resp,
				columns:[
					{"data":"id"},
					{"data":"nombre"},
					{"data":"apellido"},
					{"data":"email"},
					{"data":"ciudad"},
					{"data":"pais"},
					{"data":"telefono"}
				]
		    	});
	        }
		});
	}
	
	$(document).ready(function(){  
	$(document).on('click', '.add', function(){  
		$('#Registrar').click(function(){

				var nombre=$('#Nombre').val();
				var apellido=$('#apellido').val();
				var email=$('#email').val();
				var ciudad=$('#ciudad').val();
				var pais=$('#pais').val();
				var telefono=$('#telefono').val();
				
				$.ajax({
								type: "GET",
								method:"GET",
								url: 'localhost:8082/pruebaTecnica/insertarUsuario',
								data: 'nombre='+nombre +"&apellido=" + apellido +"&email=" + email 
								+"&ciudad=" + ciudad + "&pais=" + pais + "&telefono=" + telefono,
								success: function(data)
								{
										
			                     alert(data);

								}


				});

			});
	});
	
	$(document).on('click', '.edit', function(){
		
		  var id = $(this).attr("id");
		  
		  	$('#Editar').click(function(){
			 	
		        $("#Nombreu").val();
		        $("#Apellidou").val();
		        $("#Emailu").val();
		        $("#Ciudadu").val();
		        $("#Paisu").val();
		        $("#Telefonou").val();
		        
		        
				id=$('#idu').val();
	            nombre=$('#Nombreu').val();
	            nombre=$('#Apellidou').val();
	            nombre=$('#Emailu').val();
	            nombre=$('#Ciudadu').val();
	            nombre=$('#Paisu').val();
	            nombre=$('#Telefonou').val();
	            
	            cadena= "id=" + id + "&nombre=" + nombre + "&apellido=" + apellido +"&email=" + email 
				+"&ciudad=" + ciudad + "&pais=" + pais + "&telefono=" + telefono;
	
			    $.ajax({
					      type: 'GET',
						  url: 'localhost:8082/pruebaTecnica/editarUsuario',
						  data: cadena,
							success: function(data)
							{		
						
		                     	alertify.alert('Alert Title', data);
							}

			           });
		  
		    });
       });
	});
</script>